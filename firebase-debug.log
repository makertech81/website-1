[debug] [2019-01-23T19:45:02.035Z] ----------------------------------------------------------------------
[debug] [2019-01-23T19:45:02.037Z] Command:       /usr/local/Cellar/node/10.11.0/bin/node /Users/nicholas/.npm-packages/bin/firebase deploy --only functions
[debug] [2019-01-23T19:45:02.037Z] CLI Version:   6.2.2
[debug] [2019-01-23T19:45:02.037Z] Platform:      darwin
[debug] [2019-01-23T19:45:02.037Z] Node Version:  v10.11.0
[debug] [2019-01-23T19:45:02.037Z] Time:          Wed Jan 23 2019 14:45:02 GMT-0500 (Eastern Standard Time)
[debug] [2019-01-23T19:45:02.037Z] ----------------------------------------------------------------------
[debug] 
[debug] [2019-01-23T19:45:02.050Z] > command requires scopes: ["email","openid","https://www.googleapis.com/auth/cloudplatformprojects.readonly","https://www.googleapis.com/auth/firebase","https://www.googleapis.com/auth/cloud-platform"]
[debug] [2019-01-23T19:45:02.050Z] > authorizing via signed-in user
[debug] [2019-01-23T19:45:02.050Z] [iam] checking project hacknyu-3e0c8 for permissions ["cloudfunctions.functions.create","cloudfunctions.functions.delete","cloudfunctions.functions.get","cloudfunctions.functions.list","cloudfunctions.functions.update","cloudfunctions.operations.get","firebase.projects.get"]
[debug] [2019-01-23T19:45:02.052Z] >>> HTTP REQUEST POST https://cloudresourcemanager.googleapis.com/v1/projects/hacknyu-3e0c8:testIamPermissions  

[debug] [2019-01-23T19:45:02.408Z] <<< HTTP RESPONSE 200
[info] 
[info] === Deploying to 'hacknyu-3e0c8'...
[info] 
[info] i  deploying functions
[debug] [2019-01-23T19:45:04.329Z] > [functions] package.json contents: {
  "name": "functions",
  "scripts": {
    "lint": "tslint --project tsconfig.json",
    "build": "tsc",
    "serve": "npm run build && firebase serve --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@sendgrid/mail": "^6.3.1",
    "firebase-admin": "~6.0.0",
    "firebase-functions": "^2.1.0"
  },
  "devDependencies": {
    "tslint": "~5.8.0",
    "typescript": "~2.8.3"
  },
  "private": true
}
[info] i  functions: ensuring necessary APIs are enabled...
[debug] [2019-01-23T19:45:04.330Z] >>> HTTP REQUEST GET https://servicemanagement.googleapis.com/v1/services/cloudfunctions.googleapis.com/projectSettings/hacknyu-3e0c8?view=CONSUMER_VIEW  
 
[debug] [2019-01-23T19:45:04.331Z] >>> HTTP REQUEST GET https://servicemanagement.googleapis.com/v1/services/runtimeconfig.googleapis.com/projectSettings/hacknyu-3e0c8?view=CONSUMER_VIEW  
 
[debug] [2019-01-23T19:45:05.268Z] <<< HTTP RESPONSE 200
[debug] [2019-01-23T19:45:05.300Z] <<< HTTP RESPONSE 200
[info] ✔  functions: all necessary APIs are enabled
[debug] [2019-01-23T19:45:05.302Z] >>> HTTP REQUEST GET https://cloudresourcemanager.googleapis.com/v1/projects/hacknyu-3e0c8  
 
[debug] [2019-01-23T19:45:05.676Z] <<< HTTP RESPONSE 200
[debug] [2019-01-23T19:45:05.677Z] >>> HTTP REQUEST GET https://mobilesdk-pa.googleapis.com/v1/projects/482443126384:getServerAppConfig  
 
[debug] [2019-01-23T19:45:05.913Z] <<< HTTP RESPONSE 200
[info] i  functions: preparing functions directory for uploading...
[debug] [2019-01-23T19:45:05.915Z] >>> HTTP REQUEST GET https://runtimeconfig.googleapis.com/v1beta1/projects/hacknyu-3e0c8/configs  
 
[debug] [2019-01-23T19:45:06.179Z] <<< HTTP RESPONSE 200
[debug] [2019-01-23T19:45:06.180Z] >>> HTTP REQUEST GET https://runtimeconfig.googleapis.com/v1beta1/projects/hacknyu-3e0c8/configs/sendgrid/variables  
 
[debug] [2019-01-23T19:45:06.495Z] <<< HTTP RESPONSE 200
[debug] [2019-01-23T19:45:06.496Z] >>> HTTP REQUEST GET https://runtimeconfig.googleapis.com/v1beta1/projects/hacknyu-3e0c8/configs/sendgrid/variables/key  
 
[debug] [2019-01-23T19:45:06.802Z] <<< HTTP RESPONSE 200
[info] i  functions: packaged functions (50.62 KB) for uploading
[debug] [2019-01-23T19:45:07.117Z] >>> HTTP REQUEST POST https://cloudfunctions.googleapis.com/v1/projects/hacknyu-3e0c8/locations/us-central1/functions:generateUploadUrl  
 
[debug] [2019-01-23T19:45:07.702Z] <<< HTTP RESPONSE 200
[debug] [2019-01-23T19:45:07.703Z] >>> HTTP REQUEST PUT https://storage.googleapis.com/gcf-upload-us-central1-ed076a2e-a281-4858-b9bb-a86835429b8e/a1b1f33e-d617-4546-9f90-77754da34d88.zip?GoogleAccessId=service-482443126384@gcf-admin-robot.iam.gserviceaccount.com&Expires=1548274507&Signature=YZJtiPs%2BnhYVkrBTvj2RUUc34cjty8gWSCwt2eePcmr0aBBSt4RL0eJuy0lpot9D45MrTj54qKJ83zEJo7Dm2oNOox4LWj7ZgXkRk7UGjBOn0ruTNB0%2BsSbBjjGC88MiBZA0iMZNqXWC6pMXO0oaVCufbou4TxjzfbiqkanCRpELto1MZjngZoC%2F4eSjvqhjEsfDWoueLOzogiFrVr2tQVOkOeBWrmSLlTlMsUY52AiirltVfJkVVnxJE2Qdpk5Q3IilJMUGqFeRpT5Xgve9qc1stDTlks5rBb5TAClYP%2BaRjG70u4CFbzvW2%2FcNXIYGuJOl31KkczM9SJS%2FBUt2Eg%3D%3D  

[debug] [2019-01-23T19:45:08.094Z] <<< HTTP RESPONSE 200
[info] ✔  functions: functions folder uploaded successfully
[debug] [2019-01-23T19:45:08.097Z] >>> HTTP REQUEST GET https://cloudfunctions.googleapis.com/v1/projects/hacknyu-3e0c8/locations/-/functions  
 
[debug] [2019-01-23T19:45:08.751Z] <<< HTTP RESPONSE 200
[info] i  functions: creating Node.js 6 function sendAcceptanceEmail(us-central1)...
[debug] [2019-01-23T19:45:08.754Z] Trigger is:  {"eventTrigger":{"resource":"projects/hacknyu-3e0c8/databases/(default)/documents/admitted/{userId}","eventType":"providers/cloud.firestore/eventTypes/document.create","service":"firestore.googleapis.com"}}
[info] i  functions: updating Node.js 6 function sendConfirmationEmail(us-central1)...
[debug] [2019-01-23T19:45:08.756Z] Trigger is:  {"eventTrigger":{"resource":"projects/hacknyu-3e0c8/databases/(default)/documents/users/{userId}","eventType":"providers/cloud.firestore/eventTypes/document.write","service":"firestore.googleapis.com"}}
[debug] [2019-01-23T19:45:08.759Z] >>> HTTP REQUEST POST https://cloudfunctions.googleapis.com/v1/projects/hacknyu-3e0c8/locations/us-central1/functions  

[debug] [2019-01-23T19:45:08.760Z] >>> HTTP REQUEST PATCH https://cloudfunctions.googleapis.com/v1/projects/hacknyu-3e0c8/locations/us-central1/functions/sendConfirmationEmail {"updateMask":"sourceUploadUrl,name,labels,eventTrigger.resource,eventTrigger.eventType,eventTrigger.service"} 

[debug] [2019-01-23T19:45:09.198Z] <<< HTTP RESPONSE 200
[debug] [2019-01-23T19:45:09.274Z] <<< HTTP RESPONSE 200
[debug] [2019-01-23T19:45:09.277Z] >>> HTTP REQUEST GET https://cloudfunctions.googleapis.com/v1/operations/aGFja255dS0zZTBjOC91cy1jZW50cmFsMS9zZW5kQWNjZXB0YW5jZUVtYWlsL1ozTHZhRzFqaks4  
 
[debug] [2019-01-23T19:45:09.278Z] >>> HTTP REQUEST GET https://cloudfunctions.googleapis.com/v1/operations/aGFja255dS0zZTBjOC91cy1jZW50cmFsMS9zZW5kQ29uZmlybWF0aW9uRW1haWwvY1NjZWtlUFpwQnc  
 
[debug] [2019-01-23T19:45:09.671Z] <<< HTTP RESPONSE 200
[debug] [2019-01-23T19:45:09.674Z] <<< HTTP RESPONSE 200
[debug] [2019-01-23T19:45:11.677Z] >>> HTTP REQUEST GET https://cloudfunctions.googleapis.com/v1/operations/aGFja255dS0zZTBjOC91cy1jZW50cmFsMS9zZW5kQ29uZmlybWF0aW9uRW1haWwvY1NjZWtlUFpwQnc  
 
[debug] [2019-01-23T19:45:11.678Z] >>> HTTP REQUEST GET https://cloudfunctions.googleapis.com/v1/operations/aGFja255dS0zZTBjOC91cy1jZW50cmFsMS9zZW5kQWNjZXB0YW5jZUVtYWlsL1ozTHZhRzFqaks4  
 
[debug] [2019-01-23T19:45:12.129Z] <<< HTTP RESPONSE 200
[debug] [2019-01-23T19:45:12.130Z] <<< HTTP RESPONSE 200
[debug] [2019-01-23T19:45:14.135Z] >>> HTTP REQUEST GET https://cloudfunctions.googleapis.com/v1/operations/aGFja255dS0zZTBjOC91cy1jZW50cmFsMS9zZW5kQWNjZXB0YW5jZUVtYWlsL1ozTHZhRzFqaks4  
 
[debug] [2019-01-23T19:45:14.136Z] >>> HTTP REQUEST GET https://cloudfunctions.googleapis.com/v1/operations/aGFja255dS0zZTBjOC91cy1jZW50cmFsMS9zZW5kQ29uZmlybWF0aW9uRW1haWwvY1NjZWtlUFpwQnc  
 
[debug] [2019-01-23T19:45:14.499Z] <<< HTTP RESPONSE 200
[debug] [2019-01-23T19:45:14.504Z] <<< HTTP RESPONSE 200
[debug] [2019-01-23T19:45:16.504Z] >>> HTTP REQUEST GET https://cloudfunctions.googleapis.com/v1/operations/aGFja255dS0zZTBjOC91cy1jZW50cmFsMS9zZW5kQ29uZmlybWF0aW9uRW1haWwvY1NjZWtlUFpwQnc  
 
[debug] [2019-01-23T19:45:16.509Z] >>> HTTP REQUEST GET https://cloudfunctions.googleapis.com/v1/operations/aGFja255dS0zZTBjOC91cy1jZW50cmFsMS9zZW5kQWNjZXB0YW5jZUVtYWlsL1ozTHZhRzFqaks4  
 
[debug] [2019-01-23T19:45:16.875Z] <<< HTTP RESPONSE 200
[debug] [2019-01-23T19:45:16.907Z] <<< HTTP RESPONSE 200
[debug] [2019-01-23T19:45:18.877Z] >>> HTTP REQUEST GET https://cloudfunctions.googleapis.com/v1/operations/aGFja255dS0zZTBjOC91cy1jZW50cmFsMS9zZW5kQ29uZmlybWF0aW9uRW1haWwvY1NjZWtlUFpwQnc  
 
[debug] [2019-01-23T19:45:18.909Z] >>> HTTP REQUEST GET https://cloudfunctions.googleapis.com/v1/operations/aGFja255dS0zZTBjOC91cy1jZW50cmFsMS9zZW5kQWNjZXB0YW5jZUVtYWlsL1ozTHZhRzFqaks4  
 
[debug] [2019-01-23T19:45:19.119Z] <<< HTTP RESPONSE 200
[warn] ⚠  functions[sendConfirmationEmail(us-central1)]: Deployment error.
[info] Function failed on loading user code. Error message: Code in file lib/index.js can't be loaded.
Did you list all required modules in the package.json dependencies?
Detailed stack trace: Error: Cannot find module 'react-dom/server'
    at Function.Module._resolveFilename (module.js:476:15)
    at Function.Module._load (module.js:424:25)
    at Module.require (module.js:504:17)
    at require (internal/module.js:20:19)
    at Object.<anonymous> (/user_code/lib/AcceptanceEmail.js:3:24)
    at Module._compile (module.js:577:32)
    at Object.Module._extensions..js (module.js:586:10)
    at Module.load (module.js:494:32)
    at tryModuleLoad (module.js:453:12)
    at Function.Module._load (module.js:445:3)
[debug] [2019-01-23T19:45:19.282Z] <<< HTTP RESPONSE 200
[debug] [2019-01-23T19:45:21.286Z] >>> HTTP REQUEST GET https://cloudfunctions.googleapis.com/v1/operations/aGFja255dS0zZTBjOC91cy1jZW50cmFsMS9zZW5kQWNjZXB0YW5jZUVtYWlsL1ozTHZhRzFqaks4  
 
[debug] [2019-01-23T19:45:21.657Z] <<< HTTP RESPONSE 200
[debug] [2019-01-23T19:45:23.659Z] >>> HTTP REQUEST GET https://cloudfunctions.googleapis.com/v1/operations/aGFja255dS0zZTBjOC91cy1jZW50cmFsMS9zZW5kQWNjZXB0YW5jZUVtYWlsL1ozTHZhRzFqaks4  
 
[debug] [2019-01-23T19:45:24.110Z] <<< HTTP RESPONSE 200
